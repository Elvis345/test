<!DOCTYPE html>
<html>
<head>
	<title>Ping Pong Game</title>
</head>
<body>
	<canvas id="canvas" width="800" height="400"></canvas>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript">
		//Sample functions, remove these functions and design ping-pong game with onInit and onUpdate.

		app.onInit = function () {
			console.log("hello");
			this.nodes.push({
				id: 'leftPlayer',
				x: app.width / 25,
				y: app.height / 2 - app.height / 14,
				width: app.width / 50,
                height: app.height / 7,
				color: 'black',
				up: 0,
				down: 0
			});

			this.nodes.push({
				id: 'rightPlayer',
				x: app.width - app.width / 25,
                y: app.height / 2 - app.height / 14,
                width: app.width / 50,
				height : app.height / 7,
				color: 'black',
				up: 0,
				down: 0
			});
		};

		app.onUpdate = function (time) {
			var speed = app.height / 20;

			//move players
            this.getNode('leftPlayer').y += speed * (this.getNode('leftPlayer').down - this.getNode('leftPlayer').up);
			this.getNode('rightPlayer').y += speed * (this.getNode('rightPlayer').down - this.getNode('rightPlayer').up);

			//prevent players form going outside the boundaries
			if (this.getNode('leftPlayer').y < 0) {
				this.getNode('leftPlayer').y = 0;
			}
			else if (this.getNode('leftPlayer').y + this.getNode('leftPlayer').height > app.height) {
				this.getNode('leftPlayer').y = app.height - this.getNode('leftPlayer').height;
			}

			if (this.getNode('rightPlayer').y < 0) {
				this.getNode('rightPlayer').y = 0;
			}
            else if (this.getNode('rightPlayer').y + this.getNode('rightPlayer').height > app.height) {
                this.getNode('rightPlayer').y = app.height - this.getNode('rightPlayer').height;
			}
		};
		
		document.onkeydown = function (event) {
			if (event.keyCode === 87) { //w
				console.log('nooooo');
                app.getNode('leftPlayer').up = 1;
			}
            else if (event.keyCode === 83) { //s
                app.getNode('leftPlayer').down = 1;
			}
			else if (event.keyCode === 38) { //up arrow
                app.getNode('rightPlayer').up = 1;
            }
            else if (event.keyCode === 40) { //down arrow
                app.getNode('rightPlayer').down = 1;
            }
		}

		document.onkeyup = function (event) {
            if (event.keyCode === 87) { //w
                app.getNode('leftPlayer').up = 0;
            }
            else if (event.keyCode === 83) { //s
				app.getNode('leftPlayer').down = 0;
            }
            else if (event.keyCode === 38) { //up arrow
                app.getNode('rightPlayer').up = 0;
            }
            else if (event.keyCode === 40) { //down arrow
                app.getNode('rightPlayer').down = 0;
            }
        }
	</script>
</body>
</html>